
<ion-view view-title="QC Assurance">
 
<div class="QCForm">        
<ion-content >

    <ion-refresher pulling-text="Pull to refresh..." on-refresh="doRefresh()"></ion-refresher>

<div class="loginFields">
    <div class="row">
    <form class="col loginForm" name="addqcform" ng-init="qcAssuranceinit()">   
              <div class="row">
                  <div class="input-field col "> 
                        <span class="input-label item-stacked-label" style="margin-bottom: -30px;">
                                <p>QC Sample ID</p>
                            </span>  
                   <div class="form-logo"><img src="img/lab.png"></div> 
                      <input id="qcsampleId" type="text" class="qcsampleId" name="qcsampleId" title="Please Enter QC Sample ID" ng-model='qcAssurance.qcsampleId' placeholder="QC Sample ID" > 
                  </div>  
              </div>
              <div class="row">
                    <div class="input-field col ">
                          <span class="input-label item-stacked-label" style="margin-bottom: -30px;">
                                  <p>Reference Result <span style="color:#df3838;"> *</span></p>
                          </span>
                        <div class="form-logo"><img src="img/recencyresult.png"></div> 
                        <select class="ng-valid" id="referenceResult" name="referenceResult" title="Please Choose Reference Result" ng-model="qcAssurance.referenceResult" ng-change="OnReferenceResultChange(qcAssurance.referenceResult);" >
                          <option value="">-- Select --</option>
                          <option value="preliminary_recent_sample">Preliminary Recent Sample</option>
                          <option value="long_term_sample">Long Term Sample</option>
                          <option value="hiv_negative_sample">HIV Negative Sample</option>
                       </select>   
                    </div>
                </div> 
                <div class="row">
                    <div class="input-field col ">
                          <span class="input-label item-stacked-label" style="margin-bottom: -30px;">
                            <p>Test Kit Lot Number</p>
                              </span>
                        <div class="form-logo "><img src="img/lab.png"></div> 
                        <select class="ng-valid" id="testKitLotNo"  name="testKitLotNo"  title="Please Enter Test Kit Lot Number" ng-model="qcAssurance.testKitLotNo" ng-change="getTestKitExpDate(qcAssurance.testKitLotNo)">
                                <option value="">-- Select --</option>
                                <option ng-repeat="lot in TestKitLotList" value="{{lot['testKitLotNo']}}">{{lot['testKitLotNo']}}</option>
                        </select>   
                    </div>
                </div>
              <!-- <div class="row">
                <div class="input-field col "> 
                      <span class="input-label item-stacked-label" style="margin-bottom: -30px;">
                              <p>Test Kit Lot Number</p>
                          </span>  
                 <div class="form-logo"><img src="img/lab.png"></div> 
                    <input id="testKitLotNo" type="text" class="testKitLotNo" name="testKitLotNo" title="Please Enter Test Kit Lot Number" ng-model='qcAssurance.testKitLotNo' ng-change="getTestKitExpDate(qcAssurance.testKitLotNo)" placeholder="Test Kit Lot Number" > 
                    <input  type="hidden" id="testKitLotAvailability" />
                </div>  
            </div> -->
            <div class="row">
                <div class="input-field col ">
                      <span class="input-label item-stacked-label" style="margin-bottom: -30px;">
                              <p>Test Kit Expiry Date<span style="color:#df3838;"> *</span></p>
                          </span>
                    <div class="form-logo date-img"><img src="img/date.png"></div> 
                    <input id="testKitExpDate" type="text" class="testKitExpDate" name="testKitExpDate" title="Please Enter Test Kit Expiry Date"  ng-model='qcAssurance.testKitExpDate' placeholder="Test Kit Expiry Date" readonly required>
                </div>
            </div>
            <!-- <div class="row">
                <div class="input-field col ">
                    <ion-list >
                        <ion-checkbox style="padding-top: 16px;" ng-model="qcAssurance.testNotPerformed" >Recency Test not Performed</ion-checkbox>
                      </ion-list>                              
                </div>
            </div>
            <div class="row" ng-if="qcAssurance.testNotPerformed==true">
                <div class="input-field col ">
                        <span class="input-label item-stacked-label" style="margin-bottom: -30px;">
                            <p>Reason of Rec.Test Not Performed<span style="color:#df3838;"> *</span></p>
                        </span>
                        <div class="form-logo"><img src="img/recencyresult.png"></div> 
                     <select class="ng-valid" id="recencyreason" name="recencyreason" ng-model="qcAssurance.recencyreason"
                      title="Please Choose Reason of Recency Test Not Performed" ng-change="getReasonName(qcAssurance.recencyreason)">
                       <option value="">-- Select --</option>
                       <option value="no_consent_from_the_client">No consent from the Client</option>
                       <option value="sample_was_not_collected">Sample was not collected (Phlebotomy failure)</option>
                       <option value="not_newly_diagnosed">Not newly diagnosed</option>
                       <option value="other">Other, please specify</option>
                    </select>  
                 </div>
             </div>
            <div class="row" ng-if="qcAssurance.testNotPerformed==true && qcAssurance.recencyreason=='other'">
                <div class="input-field col ">
                      <span class="input-label item-stacked-label" style="margin-bottom: -30px;">
                        <p>Other Reasons<span  style="color:#df3838;"> *</span></p>
                          </span>
                    <div class="form-logo"><img src="img/population.png"></div> 
                    <input id="otherreason" type="text" class="otherreason" name="otherreason" ng-model="qcAssurance.otherreason" placeholder="Other Reason"  >
                   
                </div>
            </div> -->
            <div class="card" style="margin-top:0;margin-bottom: 0;" >

            <h4 style="font-size: 14px;margin-left: 12px;margin-bottom: 0;font-weight: bold;">Recency Test Result</h4>
              <div class="row">
                  <div class="input-field col col-90">
                        <span class="input-label item-stacked-label" style="margin-bottom: -30px;">
                                <p>HIV+ Recency Date<span style="color:#df3838;"> *</span></p>
                            </span>
                      <div class="form-logo date-img"><img src="img/date.png"></div> 
                      <input id="hivRecencyDate" type="text" class="hivRecencyDate" name="hivRecencyDate" title="Please Enter HIV+ Recency Date" ng-click="setRecencyDate()"  ng-model='qcAssurance.hivRecencyDate' placeholder="HIV+ Recency Date" readonly required>
                     
                  </div>
                  <div class="input-field col " style="padding:0">
                    <div class="form-logo date-img" style="padding-left: 0;cursor:pointer;" ng-click="qcAssurance.hivRecencyDate =''"><img src="img/clear.png" style="height: 26px;"></div> 
                   </div>
              </div>
              <div class="row">
                 <div class="input-field col ">
                         <span class="input-label item-stacked-label" style="margin-bottom: -30px;">
                                <p>Control Line<span style="color:#df3838;"> *</span></p>
                         </span>
                         <div class="form-logo"><img src="img/recencyresult.png"></div> 
                      <select class="ng-valid" id="ctrlLine" name="ctrlLine" ng-model="qcAssurance.ctrlLine" title="Please Choose Control Line" ng-change="getOutcome(qcAssurance.ctrlLine,qcAssurance.positiveLine,qcAssurance.longTermLine)">
                        <option value="">-- Select --</option>
                        <option value="present">Present(Positive/P)</option>
                        <option value="absent">Absent(Negative/N)</option>
                     </select>  
                  </div>
              </div>
              <div class="row">
                <div class="input-field col ">
                      <span class="input-label item-stacked-label" style="margin-bottom: -30px;">
                              <p>Positive Verification Line<span style="color:#df3838;"> *</span></p>
                      </span>
                    <div class="form-logo"><img src="img/recencyresult.png"></div> 
                    <select class="ng-valid" id="positiveLine" name="positiveLine" title="Please Choose Positive Verification Line" ng-model="qcAssurance.positiveLine" ng-change="OnPositiveLineChange(qcAssurance.positiveLine);getOutcome(qcAssurance.ctrlLine,qcAssurance.positiveLine,qcAssurance.longTermLine)" >
                      <option value="">-- Select --</option>
                      <option value="present">Present(Positive/P)</option>
                      <option value="absent">Absent(Negative/N)</option>
                   </select>   
                </div>
            </div> 
            <div class="row">
                <div class="input-field col ">
                      <span class="input-label item-stacked-label" style="margin-bottom: -30px;">
                              <p>Long Term Line<span style="color:#df3838;"> *</span></p>
                      </span>
                    <div class="form-logo"><img src="img/recencyresult.png"></div> 
                    <select class="ng-valid" id="longTermLine" name="longTermLine" title="Please Choose LongTerm Line" ng-model="qcAssurance.longTermLine" ng-change="getOutcome(qcAssurance.ctrlLine,qcAssurance.positiveLine,qcAssurance.longTermLine)" >
                      <option value="">-- Select --</option>
                      <option value="present">Present(Long Term/LT)</option>
                      <option value="absent">Absent(Recent/R)</option>

                   </select> 
                </div>
            </div>
            <div class="row">
                <div class=" input-field col">
                    <span ng-if="qcAssurance.recencyOutcome!=''">Outcome:    <span class="outcome" style="margin-left: 10px;" >{{qcAssurance.recencyOutcome}}  </span></span> 
                        
                </div>
             </div> 
            </div>
       
            <!-- <div class="row">
                <div class="input-field col "> 
                      <span class="input-label item-stacked-label" style="margin-bottom: -30px;">
                              <p>Tester Name</p>
                          </span>  
                 <div class="form-logo"><img src="img/doctor.png"></div> 
                    <input id="testerName" type="text" class="testerName" name="testerName" title="Please Enter Tester Name" ng-model='qcAssurance.testerName' placeholder="Tester Name" ng-keyup="testerNameAutoComplete()"> 
                    <input  type="hidden" id="testerNameId" />
                    <input  type="hidden" id="testerNameAvailability" />
                </div>  
            </div> -->

            <div class="row">
                <div class="input-field col ">
                      <span class="input-label item-stacked-label" style="margin-bottom: -30px;">
                        <p>Tester Name</p>
                          </span>
                    <div class="form-logo "><img src="img/doctor.png"></div> 
                    <select class="ng-valid" id="testerName"  name="testerName"  title="Please Enter Tester Name" ng-model="qcAssurance.testerName">
                            <option value="">-- Select --</option>
                            <option ng-repeat="test in TesterNameList" value="{{test['testerName']}}">{{test['testerName']}}</option>
                    </select>   
                </div>
            </div>

         
              <div class="row" >
                
                  <div class="input-field col savebtn ">
                      <button class="button button-block waves-effect waves-light" type="submit"
                         ng-click="addQcAssurance()">
                         SAVE & CONTINUE
                      </button>
                  </div>
                </div>

          </form>
    
       
      </div>
  </div>
</ion-content>
</div>
</ion-view>
